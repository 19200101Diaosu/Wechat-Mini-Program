(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my-coupon/my-coupon"],{"0e23":function(t,e,n){},"272c":function(t,e,n){"use strict";(function(t){n("90f6");o(n("66fd"));var e=o(n("3cae"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"3cae":function(t,e,n){"use strict";n.r(e);var o=n("4527"),r=n("7f7a");for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n("e5b1");var a,u=n("f0c5"),c=Object(u["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=c.exports},4527:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var o={uniLoadMore:function(){return n.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more").then(n.bind(null,"7a25"))}},r=function(){var t=this,e=t.$createElement;t._self._c},i=[]},"7f7a":function(t,e,n){"use strict";n.r(e);var o=n("a576"),r=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a},a576:function(t,e,n){"use strict";(function(t){function n(t){return a(t)||i(t)||r(t)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t,e){if(t){if("string"===typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function i(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function a(t){if(Array.isArray(t))return u(t)}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c={data:function(){return{loadStatus:"loading",page:1,limit:10,list:[],goods_id:null,type:null}},created:function(){this.getData()},onLoad:function(t){t.goods_id&&t.type&&(this.goods_id=t.goods_id,this.type=t.type)},onPullDownRefresh:function(){this.page=1,this.getData().finally((function(){t.stopPullDownRefresh()}))},onReachBottom:function(){this.handleLoadMore()},methods:{handleLoadMore:function(){"more"==this.loadStatus&&(this.page=this.page+1,this.getData())},getData:function(){var t=this,e=this.page;return this.$api.getUserCoupon({page:this.page,limit:this.limit}).then((function(o){o.rows=t.formatList(o.rows),console.log(o.rows),t.list=1==e?o.rows:[].concat(n(t.list),n(o.rows)),t.loadStatus=o.rows.length<t.limit?"noMore":"more"})).catch((function(n){t.loadStatus="more",e>1&&(t.page=t.page-1)}))},formatList:function(t){var e=this;return t.forEach((function(t){var n=(new Date).getTime(),o=new Date(t.end_time).getTime();t.expired=o<n,t.btn=1==t.used?"已使用":t.expired?"已过期":"立即使用",t.typeName="course"==t.type?"课程":"专栏",e.type&&e.goods_id&&"立即使用"==t.btn&&(t.type!=e.type||t.goods_id!=e.goods_id)&&(t.btn="不可用")})),t},onClickCoupon:function(e){if("立即使用"==e.btn)return this.type&&this.goods_id?(t.$emit("chooseCoupon",{user_coupon_id:e.id,price:parseFloat(e.price)}),t.navigateBack({delta:1})):void 0}}};e.default=c}).call(this,n("543d")["default"])},e5b1:function(t,e,n){"use strict";var o=n("0e23"),r=n.n(o);r.a}},[["272c","common/runtime","common/vendor"]]]);